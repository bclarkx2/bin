#!/usr/bin/env bash 

cmd="$1"
pattern="$2"

inotifywait --exclude="${pattern}" -e close_write,moved_to,create -m . |
while read -r directory events filename; do
  bash -c "${cmd}"
done
